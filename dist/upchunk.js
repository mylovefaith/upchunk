!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.UpChunk=e():t.UpChunk=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};e.__esModule=!0,e.createUpload=e.UpChunk=void 0;var o=n(2),i=n(4),s=[200,201,202,204,308],a=[408,502,503,504],u=function(){function t(t){var e=this;this.endpoint=t.endpoint,this.file=t.file,this.additionalData=t.data,this.headers=t.headers||{},this.method=t.method||"PUT",this.chunkSize=t.chunkSize||30720,this.attempts=t.attempts||5,this.delayBeforeAttempt=t.delayBeforeAttempt||1,this.maxFileBytes=1024*(t.maxFileSize||0),this.chunkCount=0,this.chunkByteSize=1024*this.chunkSize,this.totalChunks=Math.ceil(this.file.size/this.chunkByteSize),this.attemptCount=0,this.offline=!1,this.paused=!1,this.success=!1,this.reader=new FileReader,this.eventTarget=new o.EventTarget,this.validateOptions(),this.getEndpoint().then((function(){return e.sendChunks()})),"undefined"!=typeof window&&(window.addEventListener("online",(function(){e.offline&&(e.offline=!1,e.dispatch("online"),e.sendChunks())})),window.addEventListener("offline",(function(){e.offline=!0,e.dispatch("offline")})))}return t.prototype.on=function(t,e){this.eventTarget.addEventListener(t,e)},t.prototype.abort=function(){var t;this.pause(),null===(t=this.currentXhr)||void 0===t||t.abort()},t.prototype.pause=function(){this.paused=!0},t.prototype.resume=function(){this.paused&&(this.paused=!1,this.sendChunks())},t.prototype.dispatch=function(t,e){var n=new CustomEvent(t,{detail:e});this.eventTarget.dispatchEvent(n)},t.prototype.validateOptions=function(){if(!this.endpoint||"function"!=typeof this.endpoint&&"string"!=typeof this.endpoint)throw new TypeError("endpoint must be defined as a string or a function that returns a promise");if(!(this.file instanceof File))throw new TypeError("file must be a File object");if(this.headers&&"object"!=typeof this.headers)throw new TypeError("headers must be null or an object");if(this.chunkSize&&("number"!=typeof this.chunkSize||this.chunkSize<=0||this.chunkSize%256!=0))throw new TypeError("chunkSize must be a positive number in multiples of 256");if(this.maxFileBytes>0&&this.maxFileBytes<this.file.size)throw new Error("file size exceeds maximum (".concat(this.file.size," > ").concat(this.maxFileBytes,")"));if(this.attempts&&("number"!=typeof this.attempts||this.attempts<=0))throw new TypeError("retries must be a positive number");if(this.delayBeforeAttempt&&("number"!=typeof this.delayBeforeAttempt||this.delayBeforeAttempt<0))throw new TypeError("delayBeforeAttempt must be a positive number")},t.prototype.getEndpoint=function(){var t=this;return"string"==typeof this.endpoint?(this.endpointValue=this.endpoint,Promise.resolve(this.endpoint)):this.endpoint(this.file).then((function(e){return t.endpointValue=e,t.endpointValue}))},t.prototype.getChunk=function(){var t=this;return new Promise((function(e){var n=1===t.totalChunks?t.file.size:t.chunkByteSize,r=n*t.chunkCount;t.reader.onload=function(){null!==t.reader.result&&(t.chunk=new Blob([t.reader.result],{type:"application/octet-stream"})),e()},t.reader.readAsArrayBuffer(t.file.slice(r,r+n))}))},t.prototype.xhrPromise=function(t){var e=this,n=function(t){t.upload.onprogress=function(t){var n,r=100/e.totalChunks,o=r*e.file.size,i=r*e.chunkCount,s=t.loaded/(null!==(n=t.total)&&void 0!==n?n:o)*r;e.dispatch("progress",Math.min(i+s,100))}};return new Promise((function(o,s){e.currentXhr=(0,i.default)(r(r({},t),{beforeSend:n}),(function(t,n){return e.currentXhr=void 0,t?s(t):o(n)}))}))},t.prototype.sendChunk=function(){var t,e,n,o=this.chunkCount*this.chunkByteSize,i=o+this.chunk.size-1,s=r(r({},this.headers),{"Content-Type":this.file.type,"Content-Range":"bytes ".concat(o,"-").concat(i,"/").concat(this.file.size)}),a=new FormData;return a.append("data",this.chunk),a.append("name",(null===(t=this.additionalData)||void 0===t?void 0:t.name)||""),a.append("description",(null===(e=this.additionalData)||void 0===e?void 0:e.description)||""),(null===(n=this.additionalData)||void 0===n?void 0:n.storeIds)&&a.append("storeIds",JSON.stringify(this.additionalData.storeIds)),this.dispatch("attempt",{chunkNumber:this.chunkCount,chunkSize:this.chunk.size}),this.xhrPromise({headers:s,url:this.endpointValue,method:this.method,body:a})},t.prototype.manageRetries=function(){var t=this;if(this.attemptCount<this.attempts)return setTimeout((function(){return t.sendChunks()}),1e3*this.delayBeforeAttempt),void this.dispatch("attemptFailure",{message:"An error occured uploading chunk ".concat(this.chunkCount,". ").concat(this.attempts-this.attemptCount," retries left."),chunkNumber:this.chunkCount,attemptsLeft:this.attempts-this.attemptCount});this.dispatch("error",{message:"An error occured uploading chunk ".concat(this.chunkCount,". No more retries, stopping upload"),chunk:this.chunkCount,attempts:this.attemptCount})},t.prototype.sendChunks=function(){var t=this;this.paused||this.offline||this.success||this.getChunk().then((function(){return t.attemptCount=t.attemptCount+1,t.sendChunk()})).then((function(e){if(s.includes(e.statusCode)){t.dispatch("chunkSuccess",{chunk:t.chunkCount,attempts:t.attemptCount,response:e}),t.attemptCount=0,t.chunkCount=t.chunkCount+1,t.chunkCount<t.totalChunks?t.sendChunks():(t.success=!0,t.dispatch("success"));var n=100*(t.chunkCount/t.totalChunks*t.file.size)/t.file.size;t.dispatch("progress",n)}else if(a.includes(e.statusCode)){if(t.paused||t.offline)return;t.manageRetries()}else{if(t.paused||t.offline)return;t.dispatch("error",{message:"Server responded with ".concat(e.statusCode,". Stopping upload."),chunkNumber:t.chunkCount,attempts:t.attemptCount})}})).catch((function(e){t.paused||t.offline||t.manageRetries()}))},t}();e.UpChunk=u;e.createUpload=function(t){return new u(t)}},function(t,e,n){"use strict";(function(t,n){function r(t,e,...n){if(!t)throw new TypeError(o(e,n))}function o(t,e){let n=0;return t.replace(/%[os]/gu,()=>i(e[n++]))}function i(t){return"object"!=typeof t||null===t?String(t):Object.prototype.toString.call(t)}let s;Object.defineProperty(e,"__esModule",{value:!0});const a="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==n?n:"undefined"!=typeof globalThis?globalThis:void 0;let u;class c{constructor(t,e){this.code=t,this.message=e}warn(...t){var e;try{if(u)return void u({...this,args:t});const n=(null!==(e=(new Error).stack)&&void 0!==e?e:"").replace(/^(?:.+?\n){2}/gu,"\n");console.warn(this.message,...t,n)}catch(t){}}}const l=new c("W01","Unable to initialize event under dispatching."),p=new c("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),f=new c("W03","Assigning any truthy value to 'returnValue' property has no effect."),d=new c("W04","Unable to preventDefault on non-cancelable events."),h=new c("W05","Unable to preventDefault inside passive event listener invocation."),g=new c("W06","An event listener wasn't added because it has been added already: %o, %o"),b=new c("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),m=new c("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),v=new c("W09","Event attribute handler must be a function: %o");class y{static get NONE(){return E}static get CAPTURING_PHASE(){return w}static get AT_TARGET(){return T}static get BUBBLING_PHASE(){return R}constructor(t,e){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=null!=e?e:{};k.set(this,{type:String(t),bubbles:Boolean(n.bubbles),cancelable:Boolean(n.cancelable),composed:Boolean(n.composed),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return C(this).type}get target(){return C(this).target}get srcElement(){return C(this).target}get currentTarget(){return C(this).currentTarget}composedPath(){const t=C(this).currentTarget;return t?[t]:[]}get NONE(){return E}get CAPTURING_PHASE(){return w}get AT_TARGET(){return T}get BUBBLING_PHASE(){return R}get eventPhase(){return C(this).dispatchFlag?2:0}stopPropagation(){C(this).stopPropagationFlag=!0}get cancelBubble(){return C(this).stopPropagationFlag}set cancelBubble(t){t?C(this).stopPropagationFlag=!0:p.warn()}stopImmediatePropagation(){const t=C(this);t.stopPropagationFlag=t.stopImmediatePropagationFlag=!0}get bubbles(){return C(this).bubbles}get cancelable(){return C(this).cancelable}get returnValue(){return!C(this).canceledFlag}set returnValue(t){t?f.warn():O(C(this))}preventDefault(){O(C(this))}get defaultPrevented(){return C(this).canceledFlag}get composed(){return C(this).composed}get isTrusted(){return!1}get timeStamp(){return C(this).timeStamp}initEvent(t,e=!1,n=!1){const r=C(this);r.dispatchFlag?l.warn():k.set(this,{...r,type:String(t),bubbles:Boolean(e),cancelable:Boolean(n),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}}const E=0,w=1,T=2,R=3,k=new WeakMap;function C(t,e="this"){const n=k.get(t);return r(null!=n,"'%s' must be an object that Event constructor created, but got another one: %o",e,t),n}function O(t){t.inPassiveListenerFlag?h.warn():t.cancelable?t.canceledFlag=!0:d.warn()}Object.defineProperty(y,"NONE",{enumerable:!0}),Object.defineProperty(y,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(y,"AT_TARGET",{enumerable:!0}),Object.defineProperty(y,"BUBBLING_PHASE",{enumerable:!0});const P=Object.getOwnPropertyNames(y.prototype);for(let t=0;t<P.length;++t)"constructor"!==P[t]&&Object.defineProperty(y.prototype,P[t],{enumerable:!0});let S;void 0!==a&&void 0!==a.Event&&Object.setPrototypeOf(y.prototype,a.Event.prototype);const A={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function _(t){const e=Object.keys(A);for(let n=0;n<e.length;++n){const r=e[n],o=A[r];Object.defineProperty(t,r,{get:()=>o,configurable:!0,enumerable:!0})}}class j extends y{static wrap(t){return new(function t(e){const n=Object.getPrototypeOf(e);if(null==n)return j;let r=B.get(n);null==r&&(r=function(t,e){class n extends t{}const r=Object.keys(e);for(let t=0;t<r.length;++t)Object.defineProperty(n.prototype,r[t],D(e,r[t]));return n}(t(n),n),B.set(n,r));return r}(t))(t)}constructor(t){super(t.type,{bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}),t.cancelBubble&&super.stopPropagation(),t.defaultPrevented&&super.preventDefault(),L.set(this,{original:t});const e=Object.keys(t);for(let n=0;n<e.length;++n){const r=e[n];r in this||Object.defineProperty(this,r,D(t,r))}}stopPropagation(){super.stopPropagation();const{original:t}=I(this);"stopPropagation"in t&&t.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(t){super.cancelBubble=t;const{original:e}=I(this);"cancelBubble"in e&&(e.cancelBubble=t)}stopImmediatePropagation(){super.stopImmediatePropagation();const{original:t}=I(this);"stopImmediatePropagation"in t&&t.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(t){super.returnValue=t;const{original:e}=I(this);"returnValue"in e&&(e.returnValue=t)}preventDefault(){super.preventDefault();const{original:t}=I(this);"preventDefault"in t&&t.preventDefault()}get timeStamp(){const{original:t}=I(this);return"timeStamp"in t?t.timeStamp:super.timeStamp}}const L=new WeakMap;function I(t){const e=L.get(t);return r(null!=e,"'this' is expected an Event object, but got",t),e}const B=new WeakMap;function D(t,e){const n=Object.getOwnPropertyDescriptor(t,e);return{get(){const t=I(this).original,n=t[e];return"function"==typeof n?n.bind(t):n},set(t){I(this).original[e]=t},configurable:n.configurable,enumerable:n.enumerable}}function N(t){return 1==(1&t.flags)}function F(t){return 2==(2&t.flags)}function x(t){return 4==(4&t.flags)}function M(t){return 8==(8&t.flags)}function U({callback:e},n,r){try{"function"==typeof e?e.call(n,r):"function"==typeof e.handleEvent&&e.handleEvent(r)}catch(e){!function(e){try{const n=e instanceof Error?e:new Error(i(e));if(s)return void s(n);if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:n,message:n.message}));else if(void 0!==t&&"function"==typeof t.emit)return void t.emit("uncaughtException",n);console.error(n)}catch(t){}}(e)}}function H({listeners:t},e,n){for(let r=0;r<t.length;++r)if(t[r].callback===e&&N(t[r])===n)return r;return-1}function z(t,e,n,r,o,i){let s;i&&(s=X.bind(null,t,e,n),i.addEventListener("abort",s));const a=function(t,e,n,r,o,i){return{callback:t,flags:(e?1:0)|(n?2:0)|(r?4:0),signal:o,signalListener:i}}(e,n,r,o,i,s);return t.cow?(t.cow=!1,t.listeners=[...t.listeners,a]):t.listeners.push(a),a}function X(t,e,n){const r=H(t,e,n);return-1!==r&&V(t,r)}function V(t,e,n=!1){const r=t.listeners[e];return function(t){t.flags|=8}(r),r.signal&&r.signal.removeEventListener("abort",r.signalListener),t.cow&&!n?(t.cow=!1,t.listeners=t.listeners.filter((t,n)=>n!==e),!1):(t.listeners.splice(e,1),!0)}function W(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t[e]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}B.set(Object.prototype,j),void 0!==a&&void 0!==a.Event&&B.set(a.Event.prototype,j);class q{constructor(){G.set(this,Object.create(null))}addEventListener(t,e,n){const r=Y(this),{callback:o,capture:i,once:s,passive:a,signal:u,type:c}=function(t,e,n){var r;if(J(e),"object"==typeof n&&null!==n)return{type:String(t),callback:null!=e?e:void 0,capture:Boolean(n.capture),passive:Boolean(n.passive),once:Boolean(n.once),signal:null!==(r=n.signal)&&void 0!==r?r:void 0};return{type:String(t),callback:null!=e?e:void 0,capture:Boolean(n),passive:!1,once:!1,signal:void 0}}(t,e,n);if(null==o||(null==u?void 0:u.aborted))return;const l=W(r,c),p=H(l,o,i);-1===p?z(l,o,i,a,s,u):function(t,e,n,r){g.warn(N(t)?"capture":"bubble",t.callback),F(t)!==e&&b.warn("passive");x(t)!==n&&b.warn("once");t.signal!==r&&b.warn("signal")}(l.listeners[p],a,s,u)}removeEventListener(t,e,n){const r=Y(this),{callback:o,capture:i,type:s}=function(t,e,n){if(J(e),"object"==typeof n&&null!==n)return{type:String(t),callback:null!=e?e:void 0,capture:Boolean(n.capture)};return{type:String(t),callback:null!=e?e:void 0,capture:Boolean(n)}}(t,e,n),a=r[s];null!=o&&a&&X(a,o,i)}dispatchEvent(t){const e=Y(this)[String(t.type)];if(null==e)return!0;const n=t instanceof y?t:j.wrap(t),r=C(n,"event");if(r.dispatchFlag)throw o="This event has been in dispatching.",a.DOMException?new a.DOMException(o,"InvalidStateError"):(null==S&&(S=class t extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,t)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(S.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),_(S),_(S.prototype)),new S(o));var o;if(r.dispatchFlag=!0,r.target=r.currentTarget=this,!r.stopPropagationFlag){const{cow:t,listeners:o}=e;e.cow=!0;for(let i=0;i<o.length;++i){const s=o[i];if(!M(s)&&(x(s)&&V(e,i,!t)&&(i-=1),r.inPassiveListenerFlag=F(s),U(s,this,n),r.inPassiveListenerFlag=!1,r.stopImmediatePropagationFlag))break}t||(e.cow=!1)}return r.target=null,r.currentTarget=null,r.stopImmediatePropagationFlag=!1,r.stopPropagationFlag=!1,r.dispatchFlag=!1,!r.canceledFlag}}const G=new WeakMap;function Y(t,e="this"){const n=G.get(t);return r(null!=n,"'%s' must be an object that EventTarget constructor created, but got another one: %o",e,t),n}function J(t){if("function"!=typeof t&&("object"!=typeof t||null===t||"function"!=typeof t.handleEvent)){if(null!=t&&"object"!=typeof t)throw new TypeError(o(m.message,[t]));m.warn(t)}}const Q=Object.getOwnPropertyNames(q.prototype);for(let t=0;t<Q.length;++t)"constructor"!==Q[t]&&Object.defineProperty(q.prototype,Q[t],{enumerable:!0});function Z(t,e){var n,r;return null!==(r=null===(n=Y(t,"target")[e])||void 0===n?void 0:n.attrCallback)&&void 0!==r?r:null}function K(t,e,n){null!=n&&"function"!=typeof n&&v.warn(n),"function"==typeof n||"object"==typeof n&&null!==n?function(t,e,n){const r=W(Y(t,"target"),String(e));r.attrCallback=n,null==r.attrListener&&(r.attrListener=z(r,function(t){return function(e){const n=t.attrCallback;"function"==typeof n&&n.call(this,e)}}(r),!1,!1,!1,void 0))}(t,e,n):function(t,e){const n=Y(t,"target")[String(e)];n&&n.attrListener&&(X(n,n.attrListener.callback,!1),n.attrCallback=n.attrListener=void 0)}(t,e)}function $(t,e,n){Object.defineProperty(t,"on"+e,{get(){return Z(this,e)},set(t){K(this,e,t)},configurable:!0,enumerable:!0})}void 0!==a&&void 0!==a.EventTarget&&Object.setPrototypeOf(q.prototype,a.EventTarget.prototype),e.Event=y,e.EventTarget=q,e.default=q,e.defineCustomEventTarget=function(...t){class e extends q{}for(let n=0;n<t.length;++n)$(e.prototype,t[n]);return e},e.defineEventAttribute=$,e.getEventAttributeValue=Z,e.setErrorHandler=function(t){r("function"==typeof t||void 0===t,"The error handler must be a function or undefined, but got %o.",t),s=t},e.setEventAttributeValue=K,e.setWarningHandler=function(t){r("function"==typeof t||void 0===t,"The warning handler must be a function or undefined, but got %o.",t),u=t}}).call(this,n(3),n(0))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,p=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&d())}function d(){if(!l){var t=a(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(5),o=n(6),i=n(7),s=n(8);function a(t,e,n){var r=t;return o(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=s(e,{uri:t}),r.callback=n,r}function u(t,e,n){return c(e=a(t,e,n))}function c(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,r,o){e||(e=!0,t.callback(n,r,o))};function r(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(l),m)try{t=JSON.parse(t)}catch(t){}return t}function o(t){return clearTimeout(p),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,v)}function s(){if(!c){var e;clearTimeout(p),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var o=v,s=null;return 0!==e?(o={body:r(),statusCode:e,method:d,headers:{},url:f,rawRequest:l},l.getAllResponseHeaders&&(o.headers=i(l.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),n(s,o,o.body)}}var a,c,l=t.xhr||null;l||(l=t.cors||t.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var p,f=l.url=t.uri||t.url,d=l.method=t.method||"GET",h=t.body||t.data,g=l.headers=t.headers||{},b=!!t.sync,m=!1,v={body:void 0,headers:{},statusCode:0,method:d,url:f,rawRequest:l};if("json"in t&&!1!==t.json&&(m=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),h=JSON.stringify(!0===t.json?h:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(s,0)},l.onload=s,l.onerror=o,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=o,l.open(d,f,!b,t.username,t.password),b||(l.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(p=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",o(t)}}),t.timeout)),l.setRequestHeader)for(a in g)g.hasOwnProperty(a)&&l.setRequestHeader(a,g[a]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(h||null),l}t.exports=u,t.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],(function(t){u["delete"===t?"del":t]=function(e,n,r){return(n=a(e,n,r)).method=t.toUpperCase(),c(n)}}))},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,n(0))},function(t,e){t.exports=function(t){if(!t)return!1;var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e){var n=function(t){return t.replace(/^\s+|\s+$/g,"")};t.exports=function(t){if(!t)return{};for(var e,r={},o=n(t).split("\n"),i=0;i<o.length;i++){var s=o[i],a=s.indexOf(":"),u=n(s.slice(0,a)).toLowerCase(),c=n(s.slice(a+1));void 0===r[u]?r[u]=c:(e=r[u],"[object Array]"===Object.prototype.toString.call(e)?r[u].push(c):r[u]=[r[u],c])}return r}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t};var n=Object.prototype.hasOwnProperty}])}));
//# sourceMappingURL=upchunk.js.map