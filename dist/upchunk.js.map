{"version":3,"sources":["webpack://UpChunk/webpack/universalModuleDefinition","webpack://UpChunk/webpack/bootstrap","webpack://UpChunk/(webpack)/buildin/global.js","webpack://UpChunk/./src/upchunk.ts","webpack://UpChunk/./node_modules/event-target-shim/index.js","webpack://UpChunk/./node_modules/process/browser.js","webpack://UpChunk/./node_modules/xhr/index.js","webpack://UpChunk/./node_modules/global/window.js","webpack://UpChunk/./node_modules/is-function/index.js","webpack://UpChunk/./node_modules/parse-headers/parse-headers.js","webpack://UpChunk/./node_modules/xtend/immutable.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","Function","e","window","__assign","assign","arguments","length","apply","createUpload","UpChunk","event_target_shim_1","xhr_1","SUCCESSFUL_CHUNK_UPLOAD_CODES","TEMPORARY_ERROR_CODES","options","_this","endpoint","file","additionalData","data","headers","method","chunkSize","attempts","delayBeforeAttempt","maxFileBytes","maxFileSize","chunkCount","chunkByteSize","totalChunks","Math","ceil","size","attemptCount","offline","paused","success","reader","FileReader","eventTarget","EventTarget","validateOptions","getEndpoint","then","sendChunks","addEventListener","dispatch","on","eventName","fn","abort","_a","pause","currentXhr","resume","detail","event","CustomEvent","dispatchEvent","TypeError","File","Error","concat","endpointValue","Promise","resolve","getChunk","start","onload","result","chunk","Blob","type","readAsArrayBuffer","slice","xhrPromise","beforeSend","xhrObject","upload","onprogress","percentagePerChunk","sizePerChunk","successfulPercentage","chunkPercentage","loaded","total","min","reject","err","resp","undefined","sendChunk","_b","_c","_d","rangeStart","rangeEnd","formData","FormData","append","description","storeIds","JSON","stringify","moduleName","chunkNumber","url","body","manageRetries","setTimeout","message","attemptsLeft","res","includes","statusCode","response","percentProgress","assertType","condition","args","format","replace","anyToString","x","String","toString","currentErrorHandler","Global","self","global","globalThis","currentWarnHandler","Warning","code","stack","console","warn","InitEventWasCalledWhileDispatching","FalsyWasAssignedToCancelBubble","TruthyWasAssignedToReturnValue","NonCancelableEventWasCanceled","CanceledInPassiveListener","EventListenerWasDuplicated","OptionWasIgnored","InvalidEventListener","InvalidAttributeHandler","Event","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","eventInitDict","opts","internalDataMap","set","bubbles","Boolean","cancelable","composed","target","currentTarget","stopPropagationFlag","stopImmediatePropagationFlag","canceledFlag","inPassiveListenerFlag","dispatchFlag","timeStamp","Date","now","$","setCancelFlag","WeakMap","retv","keys","getOwnPropertyNames","DOMException","setPrototypeOf","ErrorCodeMap","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","defineErrorCodeProperties","obj","configurable","EventWrapper","getWrapperClassOf","originalEvent","getPrototypeOf","wrapper","wrapperClassCache","BaseEventWrapper","originalPrototype","CustomEventWrapper","defineRedirectDescriptor","defineWrapper","super","cancelBubble","stopPropagation","defaultPrevented","preventDefault","internalDataMap$1","original","$$1","stopImmediatePropagation","returnValue","getOwnPropertyDescriptor","isCapture","listener","flags","isPassive","isOnce","isRemoved","invokeCallback","callback","handleEvent","thrownError","maybeError","error","ErrorEvent","process","emit","reportError","findIndexOfListener","listeners","capture","addListener","list","passive","once","signal","signalListener","removeListener","createListener","cow","push","index","removeListenerAt","disableCow","setRemoved","removeEventListener","filter","_","splice","ensureListenerList","listenerMap","attrCallback","attrListener","internalDataMap$2","type0","callback0","options0","$$2","assertCallback","normalizeAddOptions","aborted","warnDuplicate","normalizeOptions","wrap","eventData","msg","captureStackTrace","defineProperties","keys$1","getEventAttributeValue","setEventAttributeValue","defineEventAttributeCallback","upsertEventAttributeListener","removeEventAttributeListener","defineEventAttribute","_eventClass","default","defineCustomEventTarget","types","CustomEventTarget","setErrorHandler","setWarningHandler","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","Array","title","browser","env","argv","version","versions","off","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","isFunction","parseHeaders","xtend","initParams","uri","params","createXHR","_createXHR","called","getBody","xhr","responseText","responseType","responseXML","firefoxBugTakenEffect","documentElement","nodeName","getXml","isJson","parse","errorFunc","evt","timeoutTimer","failureResponse","loadFunc","status","useXDR","rawRequest","getAllResponseHeaders","cors","XDomainRequest","XMLHttpRequest","sync","json","onreadystatechange","readyState","onerror","onabort","ontimeout","open","username","password","withCredentials","setRequestHeader","isEmpty","send","iterator","forEachArray","toUpperCase","win","string","alert","confirm","prompt","trim","arg","headersArr","split","row","indexOf","toLowerCase","source"],"mappings":"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","file":"upchunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UpChunk\"] = factory();\n\telse\n\t\troot[\"UpChunk\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.createUpload = exports.UpChunk = void 0;\nvar event_target_shim_1 = require(\"event-target-shim\");\nvar xhr_1 = require(\"xhr\");\nvar SUCCESSFUL_CHUNK_UPLOAD_CODES = [200, 201, 202, 204, 308];\nvar TEMPORARY_ERROR_CODES = [408, 502, 503, 504]; // These error codes imply a chunk may be retried\nvar UpChunk = /** @class */ (function () {\n    function UpChunk(options) {\n        var _this = this;\n        this.endpoint = options.endpoint;\n        this.file = options.file;\n        this.additionalData = options.data;\n        this.headers = options.headers || {};\n        this.method = options.method || 'PUT';\n        this.chunkSize = options.chunkSize || 30720;\n        this.attempts = options.attempts || 5;\n        this.delayBeforeAttempt = options.delayBeforeAttempt || 1;\n        this.maxFileBytes = (options.maxFileSize || 0) * 1024;\n        this.chunkCount = 0;\n        this.chunkByteSize = this.chunkSize * 1024;\n        this.totalChunks = Math.ceil(this.file.size / this.chunkByteSize);\n        this.attemptCount = 0;\n        this.offline = false;\n        this.paused = false;\n        this.success = false;\n        this.reader = new FileReader();\n        this.eventTarget = new event_target_shim_1.EventTarget();\n        this.validateOptions();\n        this.getEndpoint().then(function () { return _this.sendChunks(); });\n        // restart sync when back online\n        // trigger events when offline/back online\n        if (typeof window !== 'undefined') {\n            window.addEventListener('online', function () {\n                if (!_this.offline) {\n                    return;\n                }\n                _this.offline = false;\n                _this.dispatch('online');\n                _this.sendChunks();\n            });\n            window.addEventListener('offline', function () {\n                _this.offline = true;\n                _this.dispatch('offline');\n            });\n        }\n    }\n    /**\n     * Subscribe to an event\n     */\n    UpChunk.prototype.on = function (eventName, fn) {\n        this.eventTarget.addEventListener(eventName, fn);\n    };\n    UpChunk.prototype.abort = function () {\n        var _a;\n        this.pause();\n        (_a = this.currentXhr) === null || _a === void 0 ? void 0 : _a.abort();\n    };\n    UpChunk.prototype.pause = function () {\n        this.paused = true;\n    };\n    UpChunk.prototype.resume = function () {\n        if (this.paused) {\n            this.paused = false;\n            this.sendChunks();\n        }\n    };\n    /**\n     * Dispatch an event\n     */\n    UpChunk.prototype.dispatch = function (eventName, detail) {\n        var event = new CustomEvent(eventName, {\n            detail: detail\n        });\n        this.eventTarget.dispatchEvent(event);\n    };\n    /**\n     * Validate options and throw errors if expectations are violated.\n     */\n    UpChunk.prototype.validateOptions = function () {\n        if (!this.endpoint ||\n            (typeof this.endpoint !== 'function' && typeof this.endpoint !== 'string')) {\n            throw new TypeError('endpoint must be defined as a string or a function that returns a promise');\n        }\n        if (!(this.file instanceof File)) {\n            throw new TypeError('file must be a File object');\n        }\n        if (this.headers && typeof this.headers !== 'object') {\n            throw new TypeError('headers must be null or an object');\n        }\n        if (this.chunkSize &&\n            (typeof this.chunkSize !== 'number' ||\n                this.chunkSize <= 0 ||\n                this.chunkSize % 256 !== 0)) {\n            throw new TypeError('chunkSize must be a positive number in multiples of 256');\n        }\n        if (this.maxFileBytes > 0 && this.maxFileBytes < this.file.size) {\n            throw new Error(\"file size exceeds maximum (\".concat(this.file.size, \" > \").concat(this.maxFileBytes, \")\"));\n        }\n        if (this.attempts &&\n            (typeof this.attempts !== 'number' || this.attempts <= 0)) {\n            throw new TypeError('retries must be a positive number');\n        }\n        if (this.delayBeforeAttempt &&\n            (typeof this.delayBeforeAttempt !== 'number' ||\n                this.delayBeforeAttempt < 0)) {\n            throw new TypeError('delayBeforeAttempt must be a positive number');\n        }\n    };\n    /**\n     * Endpoint can either be a URL or a function that returns a promise that resolves to a string.\n     */\n    UpChunk.prototype.getEndpoint = function () {\n        var _this = this;\n        if (typeof this.endpoint === 'string') {\n            this.endpointValue = this.endpoint;\n            return Promise.resolve(this.endpoint);\n        }\n        return this.endpoint(this.file).then(function (value) {\n            _this.endpointValue = value;\n            return _this.endpointValue;\n        });\n    };\n    /**\n     * Get portion of the file of x bytes corresponding to chunkSize\n     */\n    UpChunk.prototype.getChunk = function () {\n        var _this = this;\n        return new Promise(function (resolve) {\n            // Since we start with 0-chunkSize for the range, we need to subtract 1.\n            var length = _this.totalChunks === 1 ? _this.file.size : _this.chunkByteSize;\n            var start = length * _this.chunkCount;\n            _this.reader.onload = function () {\n                if (_this.reader.result !== null) {\n                    _this.chunk = new Blob([_this.reader.result], {\n                        type: 'application/octet-stream'\n                    });\n                }\n                resolve();\n            };\n            _this.reader.readAsArrayBuffer(_this.file.slice(start, start + length));\n        });\n    };\n    UpChunk.prototype.xhrPromise = function (options) {\n        var _this = this;\n        var beforeSend = function (xhrObject) {\n            xhrObject.upload.onprogress = function (event) {\n                var _a;\n                var percentagePerChunk = 100 / _this.totalChunks;\n                var sizePerChunk = percentagePerChunk * _this.file.size;\n                var successfulPercentage = percentagePerChunk * _this.chunkCount;\n                var currentChunkProgress = event.loaded / ((_a = event.total) !== null && _a !== void 0 ? _a : sizePerChunk);\n                var chunkPercentage = currentChunkProgress * percentagePerChunk;\n                _this.dispatch('progress', Math.min(successfulPercentage + chunkPercentage, 100));\n            };\n        };\n        return new Promise(function (resolve, reject) {\n            _this.currentXhr = (0, xhr_1[\"default\"])(__assign(__assign({}, options), { beforeSend: beforeSend }), function (err, resp) {\n                _this.currentXhr = undefined;\n                if (err) {\n                    return reject(err);\n                }\n                return resolve(resp);\n            });\n        });\n    };\n    /**\n     * Send chunk of the file with appropriate headers and add post parameters if it's last chunk\n     */\n    UpChunk.prototype.sendChunk = function () {\n        var _a, _b, _c, _d;\n        var rangeStart = this.chunkCount * this.chunkByteSize;\n        var rangeEnd = rangeStart + this.chunk.size - 1;\n        var headers = __assign(__assign({}, this.headers), { \n            // 'Content-Type': this.file.type,\n            'Content-Range': \"bytes \".concat(rangeStart, \"-\").concat(rangeEnd, \"/\").concat(this.file.size) });\n        var formData = new FormData();\n        formData.append('name', ((_a = this.additionalData) === null || _a === void 0 ? void 0 : _a.name) || '');\n        formData.append('description', ((_b = this.additionalData) === null || _b === void 0 ? void 0 : _b.description) || '');\n        if ((_c = this.additionalData) === null || _c === void 0 ? void 0 : _c.storeIds) {\n            formData.append('storeIds', JSON.stringify(this.additionalData.storeIds));\n        }\n        if ((_d = this.additionalData) === null || _d === void 0 ? void 0 : _d.moduleName) {\n            formData.append('moduleName', this.additionalData.moduleName);\n        }\n        formData.append('fileName', this.file.name);\n        formData.append('fileSize', \"\".concat(this.file.size));\n        formData.append('start', \"\".concat(rangeStart));\n        formData.append('end', \"\".concat(rangeEnd));\n        formData.append('data', this.chunk);\n        this.dispatch('attempt', {\n            chunkNumber: this.chunkCount,\n            chunkSize: this.chunk.size\n        });\n        return this.xhrPromise({\n            headers: headers,\n            url: this.endpointValue,\n            method: this.method,\n            body: formData\n        });\n    };\n    /**\n     * Called on net failure. If retry counter !== 0, retry after delayBeforeAttempt\n     */\n    UpChunk.prototype.manageRetries = function () {\n        var _this = this;\n        if (this.attemptCount < this.attempts) {\n            setTimeout(function () { return _this.sendChunks(); }, this.delayBeforeAttempt * 1000);\n            this.dispatch('attemptFailure', {\n                message: \"An error occured uploading chunk \".concat(this.chunkCount, \". \").concat(this.attempts - this.attemptCount, \" retries left.\"),\n                chunkNumber: this.chunkCount,\n                attemptsLeft: this.attempts - this.attemptCount\n            });\n            return;\n        }\n        this.dispatch('error', {\n            message: \"An error occured uploading chunk \".concat(this.chunkCount, \". No more retries, stopping upload\"),\n            chunk: this.chunkCount,\n            attempts: this.attemptCount\n        });\n    };\n    /**\n     * Manage the whole upload by calling getChunk & sendChunk\n     * handle errors & retries and dispatch events\n     */\n    UpChunk.prototype.sendChunks = function () {\n        var _this = this;\n        if (this.paused || this.offline || this.success) {\n            return;\n        }\n        this.getChunk()\n            .then(function () {\n            _this.attemptCount = _this.attemptCount + 1;\n            return _this.sendChunk();\n        })\n            .then(function (res) {\n            if (SUCCESSFUL_CHUNK_UPLOAD_CODES.includes(res.statusCode)) {\n                _this.dispatch('chunkSuccess', {\n                    chunk: _this.chunkCount,\n                    attempts: _this.attemptCount,\n                    response: res\n                });\n                _this.attemptCount = 0;\n                _this.chunkCount = _this.chunkCount + 1;\n                if (_this.chunkCount < _this.totalChunks) {\n                    _this.sendChunks();\n                }\n                else {\n                    _this.success = true;\n                    _this.dispatch('success');\n                }\n                var chunkFraction = _this.chunkCount / _this.totalChunks;\n                var uploadedBytes = chunkFraction * _this.file.size;\n                var percentProgress = (100 * uploadedBytes) / _this.file.size;\n                _this.dispatch('progress', percentProgress);\n            }\n            else if (TEMPORARY_ERROR_CODES.includes(res.statusCode)) {\n                if (_this.paused || _this.offline) {\n                    return;\n                }\n                _this.manageRetries();\n            }\n            else {\n                if (_this.paused || _this.offline) {\n                    return;\n                }\n                _this.dispatch('error', {\n                    message: \"Server responded with \".concat(res.statusCode, \". Stopping upload.\"),\n                    chunkNumber: _this.chunkCount,\n                    attempts: _this.attemptCount\n                });\n            }\n        })[\"catch\"](function (err) {\n            if (_this.paused || _this.offline) {\n                return;\n            }\n            // this type of error can happen after network disconnection on CORS setup\n            _this.manageRetries();\n        });\n    };\n    return UpChunk;\n}());\nexports.UpChunk = UpChunk;\nvar createUpload = function (options) { return new UpChunk(options); };\nexports.createUpload = createUpload;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Set the error handler.\n * @param value The error handler to set.\n */\nfunction setErrorHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The error handler must be a function or undefined, but got %o.\", value);\n    currentErrorHandler = value;\n}\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) {\n            currentErrorHandler(error);\n            return;\n        }\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * Set the warning handler.\n * @param value The warning handler to set.\n */\nfunction setWarningHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The warning handler must be a function or undefined, but got %o.\", value);\n    currentWarnHandler = value;\n}\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) {\n                currentWarnHandler({ ...this, args });\n                return;\n            }\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, {\n            ...data,\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n        });\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event, \"NONE\", { enumerable: true });\nObject.defineProperty(Event, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n\n/**\n * Define an `EventTarget` class that has event attibutes.\n * @param types The types to define event attributes.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineCustomEventTarget(...types) {\n    class CustomEventTarget extends EventTarget {\n    }\n    for (let i = 0; i < types.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, types[i]);\n    }\n    return CustomEventTarget;\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}\n\nexports.Event = Event;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\nexports.defineCustomEventTarget = defineCustomEventTarget;\nexports.defineEventAttribute = defineEventAttribute;\nexports.getEventAttributeValue = getEventAttributeValue;\nexports.setErrorHandler = setErrorHandler;\nexports.setEventAttributeValue = setEventAttributeValue;\nexports.setWarningHandler = setWarningHandler;\n//# sourceMappingURL=index.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n"],"sourceRoot":""}